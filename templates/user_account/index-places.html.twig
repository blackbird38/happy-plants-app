{% extends 'base.html.twig' %}

{% block title %}
    {{ parent() }}
    - My plants
{% endblock %}

{% block body %}

    {% include('navbar-places.html.twig') %}

    {#
    - check by searching if a user has any plant, if it doesn', display a message
    to encourage them adding, and a form
    - if it doesn't have a place, start by adding place
    #}


    <div class="card container mt-3 bg-light mb-3">
        <div class="card-body">
            <p>
                {% if is_granted("ROLE_ADMIN") %}
            <h4 class="card-title">Hi, {{ app.user.name }}, you can go to the admin dashboard, <a href="{{ path('admin') }}">here!</a></h4>
            {% elseif is_granted("ROLE_USER") %}
            <h4 class="card-title">{{ app.user.name }}, </h4>
            {% for message in app.flashes('success') %}
                <div class="alert alert-success text-white">
                    {{ message }}
                </div>
            {% endfor %}

            {% if numberOfPlaces == 0 %}
                <p>    Let's start by adding the places where you keep them: </p>
                {% include('user_account/place-form.html.twig') %}
            {% else %} {# numberOfPlaces > 0 #}
                <p>    You have  {{ numberOfPlaces }} locations: </p>
                <p>    Display places: </p>
                <p>
                <ul class="list-unstyled">
                    {% for place in places %}
                        <li>
                            <img src="{{asset('build/images/plants/places/'~ place.photo ~'')}}" class="img-fluid rounded-circle img-thumbnail" style="max-width: 5%;">  {{ place.name|e }}   {{ place.humidity}}%   {{ place.orientation}}
                            <a href="{{ path ('user-add-plant', { 'id': place.id }) }}" class="text-success">Add a new plant here</a> <a href="{{ path ('user-edit-place', { 'id': place.id }) }}" data-toggle="tooltip" data-placement="top" title="Edit this place"><i class="fas fa-edit text-success"></i></a> <a href="{{ path ('user-delete-place', { 'id': place.id }) }}" data-toggle="tooltip" data-placement="top" title="Delete this place and all the associated plants, if any"><i class="far fa-trash-alt text-danger"></i></a>
                        </li>
                        {#   <li>{{ dump(place) }}  </li> #}
                    {% endfor %}
                </ul>

                </p>
                {% include('user_account/place-form.html.twig') %}
            {% endif %} {# numberOfPlaces #}

        </p>


            {% endif %} {#ROLE#}
        </p>

        <div class="container card-text">
            <div class="row">

            </div>
        </div>
    </div>
    </div>

{% endblock %}
